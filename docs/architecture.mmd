flowchart LR
subgraph Client
  Browser["Browser / Hoppscotch"]
end
subgraph Cognito
  HostedUI["Cognito Hosted UI (Domain)"]
  UserPool["User Pool"]
  HostedUI -->|issues ID/Access JWT| Browser
  UserPool --- HostedUI
end
subgraph API
  APIGW["API Gateway (HTTP API)"]
  Authorizer["Cognito User Pool Authorizer"]
  APIGW --> Authorizer
  Authorizer --> APIGW
end
subgraph Compute
  Lambda["Lambda (Python)"]
end
subgraph "Data & Events"
  Dynamo["DynamoDB Table"]
  Bus["EventBridge Bus"]
  TargetLogs["CloudWatch Logs Target"]
  Bus --> TargetLogs
  Bus -.-> ConsumerB["Future Consumer(s)"]
end
subgraph Observability
  APILog["API Gateway Logs"]
  LambdaLog["Lambda Logs"]
end
subgraph "CI/CD"
  GH["GitHub Actions (OIDC)"]
  IAMRole["IAM Deploy Role"]
  TF["Terraform Plan/Apply"]
  GH --> IAMRole
  IAMRole --> TF
end
Browser -->|"GET /public"| APIGW
Browser -->|"POST /items (Authorization: Bearer ID token)"| APIGW
APIGW -->|"Lambda proxy"| Lambda
Lambda --> Dynamo
Lambda -->|"PutEvents"| Bus
APIGW --> APILog
Lambda --> LambdaLog
TF --> APIGW
TF --> Lambda
TF --> Dynamo
TF --> Bus
TF --> UserPool
TF --> HostedUI
TF --> APILog
TF --> LambdaLog
TF --> IAMRole

